# Edge Monitoring Stack (Unified) - Environment Variables
# Copy this file to .env and update with host-specific values.

# -----------------------------------------------------------------------------
# Core configuration (required for every deployment)
# -----------------------------------------------------------------------------
# Unique identifier for this edge host. Appears in metrics & logs.
HOSTNAME=edge-host-1

# Central monitoring endpoints (choose VPC or HTTPS variant)
# Example for private VPC connectivity:
# CENTRAL_PROMETHEUS_URL=http://10.116.0.2:9090/api/v1/write
# CENTRAL_LOKI_URL=http://10.116.0.2:3100/loki/api/v1/push

# Example for HTTPS + Basic Auth:
CENTRAL_PROMETHEUS_URL=https://monitoring.example.com/prometheus/api/v1/write
CENTRAL_LOKI_URL=https://monitoring.example.com/loki/api/v1/push
BASIC_AUTH_USER=remote
BASIC_AUTH_PASSWORD=your-password-here

# Optional: enable Prometheus metrics scrape from Caddy běžícím na hostu.
# Zapni metriky v lokálním Caddy (viz README) a nastav cíl (např. localhost:2019).
# CADDY_METRICS_TARGET=localhost:2019

# -----------------------------------------------------------------------------
# Optional exporters (activate via Docker Compose profiles)
# -----------------------------------------------------------------------------
# When running `docker compose`, set COMPOSE_PROFILES to include volitelné
# exportéry, např.:
#   COMPOSE_PROFILES=caddy docker compose up -d
#   COMPOSE_PROFILES=postgres docker compose up -d
#   COMPOSE_PROFILES=postgres,pgbouncer docker compose up -d
#
# Portainer → Stack → Environment variables → add COMPOSE_PROFILES with the
# desired comma-separated list.

# --- Caddy metrics (profile: caddy) -----------------------------------------
# Přidej `caddy` do COMPOSE_PROFILES, pokud má host publikovat metriky z lokální
# Caddy instance. Stack žádný Caddy kontejner nespouští, jen předá hodnotu
# `CADDY_METRICS_TARGET` do Promethea.
# COMPOSE_PROFILES=caddy
# CADDY_METRICS_TARGET=localhost:2019

# --- PostgreSQL / TimescaleDB exporter (profile: postgres) -------------------
# Connection string used by postgres-exporter. Format:
#   postgresql://user:password@host:5432/database?sslmode=disable
# POSTGRES_DATA_SOURCE_NAME=postgresql://monitoring:secret@postgres:5432/app?sslmode=disable

# Target address that Prometheus should scrape. Usually the internal service
# address exposed by this stack; leave blank to disable scrape.
# POSTGRES_EXPORTER_TARGET=postgres-exporter:9187

# External Docker network that reaches PostgreSQL, PgBouncer, Caddy, etc.
# PROD_NETWORK=production-network

# --- PgBouncer exporter (profile: pgbouncer) ---------------------------------
# Connection string for PgBouncer stats database (usually pgbouncer admin user).
# Format example: postgres://pgbouncer:secret@pgbouncer:6432/pgbouncer?sslmode=disable
# PGBOUNCER_EXPORTER_CONN_STRING=postgres://pgbouncer:secret@pgbouncer:6432/pgbouncer?sslmode=disable

# Target address for the PgBouncer exporter metrics endpoint.
# PGBOUNCER_EXPORTER_TARGET=pgbouncer-exporter:9127

# -----------------------------------------------------------------------------
# Misc notes
# -----------------------------------------------------------------------------
# - Leave BASIC_AUTH_* blank when connecting over private networks (VPC).
# - HOSTNAME must be unique across all edge hosts.
# - COMPOSE_PROFILES defaults to empty (no extra exporters).
# - Remember to create the external Docker network specified by PROD_NETWORK
#   if it does not already exist (e.g., the network with your app containers).
